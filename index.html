<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tbilisi Transport Live</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        :root { --primary: #5d5fef; --bg: #6c7ff2; --card-bg: #ffffff; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; background: var(--bg); height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        
        /* áƒ–áƒ”áƒ“áƒ áƒ—áƒ”áƒ—áƒ áƒ˜ áƒ‘áƒšáƒáƒ™áƒ˜ */
        #header-container { background: white; padding: 20px; border-radius: 0 0 40px 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); z-index: 1000; position: relative; }
        .lang-bar { display: flex; gap: 8px; margin-bottom: 15px; justify-content: flex-start; }
        .lang-btn { border: 1px solid #f0f0f0; padding: 6px 12px; border-radius: 8px; background: #f8f9ff; cursor: pointer; font-size: 12px; font-weight: bold; color: #555; }
        .lang-btn.active { background: var(--primary); color: white; border: none; }
        
        .header-content { display: flex; align-items: center; justify-content: space-between; }
        .title-group h2 { margin: 0; font-size: 22px; color: #1a1a1a; }
        .title-group p { margin: 4px 0 0; font-size: 13px; color: #888; }
        .gps-btn { background: var(--primary); color: white; border: none; padding: 12px 18px; border-radius: 15px; font-weight: bold; cursor: pointer; display: flex; align-items: center; gap: 8px; transition: transform 0.2s; }
        .gps-btn:active { transform: scale(0.95); }

        /* áƒ áƒ£áƒ™áƒ˜áƒ¡ áƒ¡áƒ”áƒ¥áƒªáƒ˜áƒ */
        #map { flex: 1; width: 100%; z-index: 1; }

        /* áƒ¥áƒ•áƒ”áƒ“áƒ áƒ¡áƒ”áƒ¥áƒªáƒ˜áƒ (áƒ›áƒáƒ áƒ¨áƒ áƒ£áƒ¢áƒ”áƒ‘áƒ˜) */
        #panel { background: white; border-radius: 40px 40px 0 0; padding: 25px 20px; height: 45%; overflow-y: auto; z-index: 1000; box-shadow: 0 -10px 30px rgba(0,0,0,0.1); }
        #panel h3 { margin: 0 0 20px 0; font-size: 20px; color: #1a1a1a; }

        /* áƒ‘áƒáƒ áƒáƒ—áƒ”áƒ‘áƒ˜áƒ¡ áƒ¡áƒ¢áƒ˜áƒšáƒ˜ (áƒ–áƒ£áƒ¡áƒ¢áƒáƒ“ áƒ áƒáƒ’áƒáƒ áƒª áƒ¨áƒ”áƒœáƒ¡ áƒ¤áƒáƒ¢áƒáƒ–áƒ”) */
        .card { display: flex; align-items: center; background: #fcfdfe; padding: 18px; border-radius: 25px; margin-bottom: 15px; border: 1px solid #f0f2f8; position: relative; box-shadow: 0 4px 12px rgba(0,0,0,0.02); }
        .bus-num { width: 55px; height: 55px; border-radius: 15px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 20px; margin-right: 15px; }
        .bus-info { flex: 1; }
        .bus-info b { display: block; font-size: 17px; color: #2d2d2d; margin-bottom: 4px; }
        .bus-info span { font-size: 14px; color: #999; display: flex; align-items: center; gap: 5px; }
        .star { color: #ccc; font-size: 20px; position: absolute; right: 20px; top: 20px; }
        .star.active { color: #ffcc00; }

        /* Leaflet-áƒ˜áƒ¡ áƒšáƒáƒ’áƒáƒ¡ áƒ“áƒáƒ›áƒáƒšáƒ•áƒ */
        .leaflet-control-attribution { display: none; }
    </style>
</head>
<body>

<div id="header-container">
    <div class="lang-bar">
        <button class="lang-btn active" onclick="changeLang('ka', this)">GE</button>
        <button class="lang-btn" onclick="changeLang('en', this)">EN</button>
        <button class="lang-btn" onclick="changeLang('ru', this)">RU</button>
    </div>
    <div class="header-content">
        <div class="title-group">
            <h2 id="app-title">áƒ—áƒ‘áƒ˜áƒšáƒ˜áƒ¡áƒ˜áƒ¡ áƒ¢áƒ áƒáƒœáƒ¡áƒáƒáƒ áƒ¢áƒ˜</h2>
            <p id="app-subtitle">áƒ áƒ”áƒáƒšáƒ£áƒ  áƒ“áƒ áƒáƒ¨áƒ˜ áƒ—áƒ•áƒáƒšáƒ§áƒ£áƒ áƒ˜áƒ¡ áƒ“áƒ”áƒ•áƒœáƒ”áƒ‘áƒ</p>
        </div>
        <button class="gps-btn" onclick="findMe()">
            ğŸ“ <span id="gps-text">áƒ©áƒ”áƒ›áƒ˜ áƒšáƒáƒ™áƒáƒªáƒ˜áƒ</span>
        </button>
    </div>
</div>

<div id="map"></div>

<div id="panel">
    <h3 id="routes-label">áƒ›áƒáƒ áƒ¨áƒ áƒ£áƒ¢áƒ”áƒ‘áƒ˜</h3>
    <div id="bus-list">
        <p style="text-align:center; color:#bbb; padding-top:40px;">áƒ“áƒáƒáƒ­áƒ˜áƒ áƒ”áƒ— "áƒ©áƒ”áƒ›áƒ˜ áƒšáƒáƒ™áƒáƒªáƒ˜áƒ"-áƒ¡ áƒ›áƒáƒœáƒáƒªáƒ”áƒ›áƒ”áƒ‘áƒ˜áƒ¡ áƒ¡áƒáƒœáƒáƒ®áƒáƒ•áƒáƒ“</p>
    </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    const translations = {
        ka: { title: "áƒ—áƒ‘áƒ˜áƒšáƒ˜áƒ¡áƒ˜áƒ¡ áƒ¢áƒ áƒáƒœáƒ¡áƒáƒáƒ áƒ¢áƒ˜", subtitle: "áƒ áƒ”áƒáƒšáƒ£áƒ  áƒ“áƒ áƒáƒ¨áƒ˜ áƒ—áƒ•áƒáƒšáƒ§áƒ£áƒ áƒ˜áƒ¡ áƒ“áƒ”áƒ•áƒœáƒ”áƒ‘áƒ", label: "áƒ›áƒáƒ áƒ¨áƒ áƒ£áƒ¢áƒ”áƒ‘áƒ˜", gps: "áƒ©áƒ”áƒ›áƒ˜ áƒšáƒáƒ™áƒáƒªáƒ˜áƒ", min: "áƒ¬áƒ£áƒ—áƒ¨áƒ˜", transport: "áƒ¢áƒ áƒáƒœáƒ¡áƒáƒáƒ áƒ¢áƒ˜" },
        en: { title: "Tbilisi Transport", subtitle: "Real-time tracking", label: "Routes", gps: "My Location", min: "min", transport: "vehicles" },
        ru: { title: "Ğ¢Ğ±Ğ¸Ğ»Ğ¸ÑÑĞºĞ¸Ğ¹ Ğ¢Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚", subtitle: "ĞÑ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸", label: "ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹", gps: "Ğ“Ğ´Ğµ Ñ?", min: "Ğ¼Ğ¸Ğ½", transport: "Ñ‚Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚Ğ°" }
    };

    let currentLang = 'ka';
    let map = L.map('map', {zoomControl: false}).setView([41.7151, 44.7870], 13);
    
    // áƒ•áƒ˜áƒ§áƒ”áƒœáƒ”áƒ‘áƒ— áƒ£áƒ¤áƒ áƒ áƒ¡áƒ£áƒ¤áƒ—áƒ áƒ áƒ£áƒ™áƒ˜áƒ¡ áƒ“áƒ˜áƒ–áƒáƒ˜áƒœáƒ¡
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png').addTo(map);

    function changeLang(lang, btn) {
        currentLang = lang;
        document.getElementById('app-title').innerText = translations[lang].title;
        document.getElementById('app-subtitle').innerText = translations[lang].subtitle;
        document.getElementById('routes-label').innerText = translations[lang].label;
        document.getElementById('gps-text').innerText = translations[lang].gps;
        
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        if(document.querySelectorAll('.card').length > 0) loadMockData();
    }

    function findMe() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(pos => {
                const lat = pos.coords.latitude;
                const lon = pos.coords.longitude;
                map.flyTo([lat, lon], 15, { animate: true, duration: 1.5 });
                L.circleMarker([lat, lon], {radius: 8, color: '#fff', fillColor: '#5d5fef', fillOpacity: 1, weight: 3}).addTo(map);
                loadMockData();
            }, () => { alert("áƒ’áƒ—áƒ®áƒáƒ•áƒ— áƒ©áƒáƒ áƒ—áƒáƒ— GPS"); });
        }
    }

    function loadMockData() {
        const list = document.getElementById('bus-list');
        list.innerHTML = '';
        const data = [
            { nr: '37', from: 'áƒ¡áƒáƒ›áƒ’áƒáƒ áƒ˜', to: 'áƒ“áƒ˜áƒ¦áƒáƒ›áƒ˜', time: 13, col: '#3b82f6', fav: true },
            { nr: '55', from: 'áƒ•áƒáƒ áƒ™áƒ”áƒ—áƒ˜áƒšáƒ˜', to: 'áƒ“áƒ”áƒšáƒ˜áƒ¡áƒ˜', time: 8, col: '#10b981', fav: false },
            { nr: '121', from: 'áƒ˜áƒ¡áƒáƒœáƒ˜', to: 'áƒ¡áƒáƒ‘áƒ£áƒ áƒ—áƒáƒšáƒ', time: 5, col: '#f59e0b', fav: false }
        ];
        
        data.forEach(bus => {
            list.innerHTML += `
                <div class="card">
                    <div class="bus-num" style="background:${bus.col}">${bus.nr}</div>
                    <div class="bus-info">
                        <b>${bus.from} - ${bus.to}</b>
                        <span>ğŸ•’ ~${bus.time} ${translations[currentLang].min} â€¢ 4 ${translations[currentLang].transport}</span>
                    </div>
                    <div class="star ${bus.fav ? 'active' : ''}">â˜…</div>
                </div>`;
        });
    }
</script>
</body>
</html>

